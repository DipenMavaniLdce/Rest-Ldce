{"version":3,"sources":["Components/AdminPanel/ApproveCertificate.js"],"names":["connect","state","role","User","credentials","props","useState","documents","setDocuments","approveDocument","setApproveDocument","certificate","setCertificate","src","setSrc","loading","setLoading","useEffect","a","Axios","get","then","res","data","catch","err","console","log","print","content","document","getElementById","pri","contentWindow","open","write","innerHTML","close","focus","setTimeout","className","length","admin","renderDocTable","onClick","disabled","title","style","display","id","map","d","key","request_id","height","width","position","renderPrintBtn"],"mappings":"yOA+HeA,uBAJS,SAACC,GACvB,MAAO,CAAEC,KAAMD,EAAME,KAAKC,YAAYF,QAGzBF,EArHf,SAA4BK,GAAQ,IAAD,EACCC,qBADD,mBAC1BC,EAD0B,KACfC,EADe,OAEaF,mBAAS,IAFtB,mBAE1BG,EAF0B,KAETC,EAFS,OAGKJ,qBAHL,mBAG1BK,EAH0B,KAGbC,EAHa,OAIXN,qBAJW,mBAI1BO,EAJ0B,KAIrBC,EAJqB,OAKHR,oBAAS,GALN,mBAK1BS,EAL0B,KAKjBC,EALiB,KAMjCC,qBAAU,eAGVA,qBAAU,WACR,sBAAC,sBAAAC,EAAA,6DACCF,GAAW,GADZ,SAEOG,IAAMC,IAAI,8BACbC,MAAK,SAACC,GACLd,EAAac,EAAIC,SAGlBC,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,MAP/B,OAQCT,GAAW,GARZ,0CAAD,KAUC,IAEH,IAAMY,EAAQ,WACZ,IAAMC,EAAUC,SAASC,eAAe,aAClCC,EAAMF,SAASC,eAAe,qBAAqBE,cACzDD,EAAIF,SAASI,OACbF,EAAIF,SAASK,MAAMN,EAAQO,WAC3BJ,EAAIF,SAASO,QACbL,EAAIM,QACJC,YAAW,WACTP,EAAIJ,UACH,MAgEL,OACE,yBAAKY,UAAU,wBACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,OACZzB,EACC,kBAAC,IAAD,MAEE,oCApEW,WACrB,GAAKR,EACL,OAAyB,IAArBA,EAAUkC,OACL,wBAAID,UAAU,eAAd,mCAIP,oCACE,kBAAC,IAAD,CACEjC,UAAWA,EACXC,aAAcA,EACdC,gBAAiBA,EACjBC,mBAAoBA,EACpBgC,MAAOrC,EAAMH,KACbU,eAAgBA,EAChBE,OAAQA,IAEV,kBAAC,IAAD,CAAkBS,KAAMZ,IACxB,kBAAC,IAAD,CAAeE,IAAKA,KAmDX8B,GA9CQ,WACrB,GAAmB,gBAAftC,EAAMH,KAEV,OACE,yBAAKsC,UAAU,eACb,4BACEA,UAAU,yBACVI,QAAShB,EACTiB,SAAqC,IAA3BpC,EAAgBgC,OAC1BK,MAC6B,IAA3BrC,EAAgBgC,OACZ,yCACA,SAPR,kCAYA,yBAAKM,MAAO,CAAEC,QAAS,SACrB,yBAAKC,GAAG,aACLxC,GACCA,EAAgByC,KAAI,SAACC,GAAD,OAClB,kBAAC,IAAD,CAAaC,IAAKD,EAAEE,WAAY9B,KAAM4B,SAI9C,4BACEF,GAAG,oBACHH,MAAM,gBACNC,MAAO,CACLO,OAAQ,MACRC,MAAO,MACPC,SAAU,eAgBLC","file":"static/js/10.1c2bfddd.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Axios from \"axios\";\r\n\r\nimport DocsApprove from \"./DocsApprove\";\r\nimport DocumentModel from \"./DocumentModel\";\r\nimport CertificateModel from \"./CertificateModel\";\r\nimport Loading from \"../../Util/Loading\";\r\nimport { connect } from \"react-redux\";\r\nimport Certificate from \"../Certificate/Certificate\";\r\n\r\nfunction ApproveCertificate(props) {\r\n  const [documents, setDocuments] = useState();\r\n  const [approveDocument, setApproveDocument] = useState([]);\r\n  const [certificate, setCertificate] = useState();\r\n  const [src, setSrc] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  useEffect(() => {\r\n\r\n  })\r\n  useEffect(() => {\r\n    (async () => {\r\n      setLoading(true);\r\n      await Axios.get(\"/api/admin/pendingDocument\")\r\n        .then((res) => {\r\n          setDocuments(res.data);\r\n\r\n        })\r\n        .catch((err) => console.log(err));\r\n      setLoading(false);\r\n    })();\r\n  }, []);\r\n\r\n  const print = () => {\r\n    const content = document.getElementById(\"printArea\");\r\n    const pri = document.getElementById(\"ifmContentToPrint\").contentWindow;\r\n    pri.document.open();\r\n    pri.document.write(content.innerHTML);\r\n    pri.document.close();\r\n    pri.focus();\r\n    setTimeout(() => {\r\n      pri.print();\r\n    }, 500);\r\n  };\r\n\r\n  const renderDocTable = () => {\r\n    if (!documents) return;\r\n    if (documents.length === 0) {\r\n      return <h1 className=\"text-center\">No Documents Left For Approval!</h1>;\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <DocsApprove\r\n          documents={documents}\r\n          setDocuments={setDocuments}\r\n          approveDocument={approveDocument}\r\n          setApproveDocument={setApproveDocument}\r\n          admin={props.role}\r\n          setCertificate={setCertificate}\r\n          setSrc={setSrc}\r\n        />\r\n        <CertificateModel data={certificate} />\r\n        <DocumentModel src={src} />\r\n      </>\r\n    );\r\n  };\r\n\r\n  const renderPrintBtn = () => {\r\n    if (props.role !== \"ROLE_SSHEAD\") return;\r\n\r\n    return (\r\n      <div className=\"text-center\">\r\n        <button\r\n          className=\"btn btn-success btn-lg\"\r\n          onClick={print}\r\n          disabled={approveDocument.length === 0}\r\n          title={\r\n            approveDocument.length === 0\r\n              ? \"First Approve atleast one Certificate!\"\r\n              : \"Print\"\r\n          }\r\n        >\r\n          Print All Approved Certificate\r\n        </button>\r\n        <div style={{ display: \"none\" }}>\r\n          <div id=\"printArea\">\r\n            {approveDocument &&\r\n              approveDocument.map((d) => (\r\n                <Certificate key={d.request_id} data={d} />\r\n              ))}\r\n          </div>\r\n        </div>\r\n        <iframe\r\n          id=\"ifmContentToPrint\"\r\n          title=\"printer_frame\"\r\n          style={{\r\n            height: \"0px\",\r\n            width: \"0px\",\r\n            position: \"absolute\",\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n \r\n  return (\r\n    <div className=\"container-fluid mt-5\">\r\n      <div className=\"row\">\r\n        <div className=\"col\">\r\n          {loading ? (\r\n            <Loading />\r\n          ) : (\r\n              <>\r\n                {renderDocTable()}\r\n                {renderPrintBtn()}\r\n              </>\r\n            )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { role: state.User.credentials.role };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ApproveCertificate);\r\n"],"sourceRoot":""}