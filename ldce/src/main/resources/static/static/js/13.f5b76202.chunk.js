(this.webpackJsonpfront_ldce=this.webpackJsonpfront_ldce||[]).push([[13],{183:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return N}));var a=n(17),r=n.n(a),o=n(3),c=n(27),u=n(185),s=n(186),l=n(188),i=n(187),p=n(49),d=n(0),m=n.n(d),f=function(e){var t=e.input,n=e.meta,a=Object(p.a)(e,["input","meta"]),r=h(n,a.className);return m.a.createElement(m.a.Fragment,null,v(a.label,t.name,a),m.a.createElement("input",Object.assign({className:r},t,{id:t.name},a)),E(n))},h=function(e){var t=e.touched,n=e.error,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"form-control",r=t&&n;return r&&(a+=" error"),a},y=function(e){var t=e.input,n=e.meta,a=e.options,r=Object(p.a)(e,["input","meta","options"]),o=h(n,r.className);return m.a.createElement(m.a.Fragment,null,v(r.label,t.name,r),m.a.createElement("select",Object.assign({className:o},t,{id:t.name},r),m.a.createElement("option",{value:"",disabled:!0,hidden:!0},r.placeholder),j(a)),E(n))},b=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))},g=function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={error:"",lableImg:null},e.onFileChange=function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c,u,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.input,c=n.target.files[0],u="",!c){t.next=22;break}if(/^image/.test(c.type)){t.next=10;break}return u="Only jpg,jpeg,png file type allow.",e.setState({error:u}),t.abrupt("return",!1);case 10:if(!(c.size>512e3)){t.next=14;break}return u="File size must not exceed 500 KB.",e.setState({error:u}),t.abrupt("return",!1);case 14:return e.setState({error:u}),t.next=17,b(c);case 17:s=t.sent,e.setState(Object(o.a)(Object(o.a)({},e.state),{},{lableImg:s})),a.onChange(c),t.next=23;break;case 22:a.onChange(null);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.input,n=e.meta,a=Object(p.a)(e,["input","meta"]),r=this.state.error;return m.a.createElement(m.a.Fragment,null,m.a.createElement("label",null,m.a.createElement("img",{src:this.state.lableImg||a.default,className:a.className||"upload-".concat(t.name),alt:"Student Img"}),m.a.createElement("span",{className:"btn btn-primary btn-lg btn-block mx-auto"},a.placeholder),m.a.createElement("input",{type:"file",accept:"image/*",className:"form-control invisible position-absolute",style:{left:"0"},id:t.name,onChange:this.onFileChange}),E(n),r&&m.a.createElement("label",{className:"error"},r)),m.a.createElement("p",null,a.message))}}]),n}(m.a.Component),v=function(e,t,n){var a=n.require,r=n.required;return e&&m.a.createElement("label",{htmlFor:t},e," ",(r||a)&&m.a.createElement("font",{color:"red"},"*"))},E=function(e){var t=e.touched,n=e.error;return t&&n&&m.a.createElement("label",{className:"error",dangerouslySetInnerHTML:{__html:n}})},j=function(e){return Object.keys(e).map((function(t){return m.a.createElement("option",{key:e[t],value:e[t]},t)}))},N=function(){var e=document.querySelector("input.error");if(e){e.focus();var t=e.getBoundingClientRect().top+document.documentElement.scrollTop;window.scrollTo({top:t-50,behavior:"smooth"})}}},184:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return p})),n.d(t,"i",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return g}));var a=n(17),r=n.n(a),o=n(27),c=n(6),u=n(21),s=n.n(u),l=function(e,t){return function(){var n=Object(o.a)(r.a.mark((function n(a){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:c.b}),a({type:c.d}),s.a.post("/authenticate",e).then((function(e){a({type:c.h}),v(e.data.jwt,e.data.domain),a(i(e.data.domain,t)),a({type:c.m}),"STUDENT"===e.data.domain?t.push("/student"):t.push("/admin")})).catch((function(e){console.log(e),a({type:c.i,payload:e.response.data})}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},i=function(e){return function(t){var n;"STUDENT"===e?(n="/student/data",s.a.get(n).then((function(e){t({type:c.l,payload:e.data})})).catch((function(e){console.log(e),t({type:c.i,payload:e})}))):(n="/admin/data",s.a.get(n).then((function(e){s.a.get("/admin/adminDashbord").then((function(n){console.log(n.data),t({type:c.g,payload:e.data,dashboard:n.data})})).catch((function(e){return console.log(e)}))})))}},p=function(e,t){return function(n){s.a.post("/registerStudent",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t.push("/login")})).catch((function(e){return console.log(e)}))}},d=function(e){return function(t){t({type:c.b}),t({type:c.d});s.a.post("/student/updateStudent",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t(i("STUDENT")),t({type:c.j,payload:"success"})})).catch((function(e){console.log(e),t({type:c.i,payload:e.response.data})}))}},m=function(e,t){return function(n){s.a.post("/registerFaculty",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t.push("/login")})).catch((function(e){return console.log(e)}))}},f=function(e,t){return function(n){n({type:c.b});var a,u,l=new FormData;e.sign?(u="sign",l.append(u,e[u],e[u].name),a=t+"/changeSign"):(u="photo",l.append(u,e[u],e[u].name),a=t+"/changePhoto");s.a.post(a,l,{header:{"content-type":"multipart/form-data"}}).then(function(){var e=Object(o.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(i("/student"===t?"STUDENT":"ADMIN"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),n({type:c.i,payload:e.response.data})}))}},h=function(e,t){return function(n){n({type:c.b}),n({type:c.d});s.a.post("".concat(t,"/changePassword"),e,{header:{"content-type":"multipart/form-data"}}).then((function(e){n({type:c.j,payload:"success"})})).catch((function(e){console.error(e),n({type:c.i,payload:e.response.data})}))}},y=function(e,t,n){return function(a){a({type:c.b}),a({type:c.d});var r="feerefund"===e?"/student/feeRefund":"/student/DocumentSubmit/".concat(e);s.a.post(r,t,{header:{"content-type":"multipart/form-data"}}).then((function(e){a({type:c.j,payload:"Success"}),a(i("STUDENT")),a({type:c.b}),n.push("/student")})).catch((function(e){console.error(e),a({type:c.i,payload:e.response.data})}))}},b=function(e){return function(t){t({type:c.b}),t({type:c.d}),console.log(e);s.a.post("/forgotPassword",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t({type:c.j,payload:e.data})})).catch((function(e){console.error(e),t({type:c.i,payload:e.response.data})}))}},g=function(){return function(e){e({type:c.f})}},v=function(e,t){var n="Bearer ".concat(e);s.a.defaults.headers.common.Authorization=n,s.a.defaults.headers.common.Domain=t}},293:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n.n(a),o=n(27),c=n(15),u=n(0),s=n.n(u),l=n(28),i=n(18),p=n(184),d=n(220),m=n(221),f=n(183);var h=Object(m.a)({form:"forgotPassword",initialValues:{type:"STUDENT"},validate:function(e){var t={};return e.type||(t.type="Please Select Role"),e.username||(t.username="Please Enter Username"),t}})((function(e){var t=e.UI,n=t.loading,a=t.errors,i=t.success,p=t.successMessage,m=Object(u.useState)("Enrollment No:"),h=Object(c.a)(m,2),y=h[0],b=h[1],g=Object(u.useState)("Enter Your Enrollment No..."),v=Object(c.a)(g,2),E=v[0],j=v[1],N=e.forgotPasswordAction,w=Object(u.useState)(null),O=Object(c.a)(w,2),S=O[0],x=O[1];Object(u.useEffect)((function(){if(p.email){var e=p.email,t=[],n=(e=e.split("")).indexOf("@");e.forEach((function(a,r){r>=2&&r<=n-3?t.push("*"):t.push(e[r])})),x(t.join(""))}}),[p]);var D=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,Object.keys(t).forEach((function(e,a){n.append(e,t[e])})),e.next=4,N(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6 col-lg-4 mx-auto mx-auto"},s.a.createElement("form",{id:"forgotPassword",className:"regForm",onSubmit:e.handleSubmit(D)},s.a.createElement("h2",{className:"form-title text-center"},"ForgotPassword"),s.a.createElement("div",{className:"form-group"},s.a.createElement(d.a,{name:"type",label:"Role:",placeholder:"Select Role",component:f.c,options:{Student:"STUDENT",Admin:"ADMIN"},onChange:function(e){"ADMIN"===e.target.value?(j("Enter Your Id..."),b("Department Id:")):(j("Enter Your Enrollment No..."),b("Enrollment No:")),console.log(e)}})),s.a.createElement("div",{className:"form-group"},s.a.createElement(d.a,{type:"text",name:"username",label:y,placeholder:E,component:f.d,require:!0})),s.a.createElement("div",{className:"form-group text-center"},s.a.createElement("button",{type:"submit",className:"btn btn-success"},"Submit")),!0===n?s.a.createElement(l.a,null):a.error&&s.a.createElement("div",{class:"alert alert-danger",style:{textAlign:"center"}},"Username Not Found"),i&&s.a.createElement("div",{class:"alert alert-success",style:{textAlign:"center"}},s.a.createElement("p",null,"username and password sent to this email"),p.email&&S)))))}));t.default=Object(i.b)((function(e){return{UI:e.UI}}),{forgotPasswordAction:p.e})(h)}}]);
//# sourceMappingURL=13.f5b76202.chunk.js.map