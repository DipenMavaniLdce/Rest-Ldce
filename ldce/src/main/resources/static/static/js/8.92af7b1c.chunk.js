(this.webpackJsonpfront_ldce=this.webpackJsonpfront_ldce||[]).push([[8],{183:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return j}));var a=n(17),r=n.n(a),o=n(3),c=n(27),u=n(185),l=n(186),s=n(188),i=n(187),p=n(49),d=n(0),m=n.n(d),f=function(e){var t=e.input,n=e.meta,a=Object(p.a)(e,["input","meta"]),r=h(n,a.className);return m.a.createElement(m.a.Fragment,null,E(a.label,t.name,a),m.a.createElement("input",Object.assign({className:r},t,{id:t.name},a)),v(n))},h=function(e){var t=e.touched,n=e.error,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"form-control",r=t&&n;return r&&(a+=" error"),a},g=function(e){var t=e.input,n=e.meta,a=e.options,r=Object(p.a)(e,["input","meta","options"]),o=h(n,r.className);return m.a.createElement(m.a.Fragment,null,E(r.label,t.name,r),m.a.createElement("select",Object.assign({className:o},t,{id:t.name},r),m.a.createElement("option",{value:"",disabled:!0,hidden:!0},r.placeholder),N(a)),v(n))},y=function(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))},b=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={error:"",lableImg:null},e.onFileChange=function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c,u,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.input,c=n.target.files[0],u="",!c){t.next=22;break}if(/^image/.test(c.type)){t.next=10;break}return u="Only jpg,jpeg,png file type allow.",e.setState({error:u}),t.abrupt("return",!1);case 10:if(!(c.size>512e3)){t.next=14;break}return u="File size must not exceed 500 KB.",e.setState({error:u}),t.abrupt("return",!1);case 14:return e.setState({error:u}),t.next=17,y(c);case 17:l=t.sent,e.setState(Object(o.a)(Object(o.a)({},e.state),{},{lableImg:l})),a.onChange(c),t.next=23;break;case 22:a.onChange(null);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.input,n=e.meta,a=Object(p.a)(e,["input","meta"]),r=this.state.error;return m.a.createElement(m.a.Fragment,null,m.a.createElement("label",null,m.a.createElement("img",{src:this.state.lableImg||a.default,className:a.className||"upload-".concat(t.name),alt:"Student Img"}),m.a.createElement("span",{className:"btn btn-primary btn-lg btn-block mx-auto"},a.placeholder),m.a.createElement("input",{type:"file",accept:"image/*",className:"form-control invisible position-absolute",style:{left:"0"},id:t.name,onChange:this.onFileChange}),v(n),r&&m.a.createElement("label",{className:"error"},r)),m.a.createElement("p",null,a.message))}}]),n}(m.a.Component),E=function(e,t,n){var a=n.require,r=n.required;return e&&m.a.createElement("label",{htmlFor:t},e," ",(r||a)&&m.a.createElement("font",{color:"red"},"*"))},v=function(e){var t=e.touched,n=e.error;return t&&n&&m.a.createElement("label",{className:"error",dangerouslySetInnerHTML:{__html:n}})},N=function(e){return Object.keys(e).map((function(t){return m.a.createElement("option",{key:e[t],value:e[t]},t)}))},j=function(){var e=document.querySelector("input.error");if(e){e.focus();var t=e.getBoundingClientRect().top+document.documentElement.scrollTop;window.scrollTo({top:t-50,behavior:"smooth"})}}},184:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"b",(function(){return p})),n.d(t,"i",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return b}));var a=n(17),r=n.n(a),o=n(27),c=n(6),u=n(21),l=n.n(u),s=function(e,t){return function(){var n=Object(o.a)(r.a.mark((function n(a){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:c.b}),a({type:c.d}),l.a.post("/authenticate",e).then((function(e){a({type:c.h}),E(e.data.jwt,e.data.domain),a(i(e.data.domain,t)),a({type:c.m}),"STUDENT"===e.data.domain?t.push("/student"):t.push("/admin")})).catch((function(e){console.log(e),a({type:c.i,payload:e.response.data})}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},i=function(e){return function(t){var n;"STUDENT"===e?(n="/student/data",l.a.get(n).then((function(e){t({type:c.l,payload:e.data})})).catch((function(e){console.log(e),t({type:c.i,payload:e})}))):(n="/admin/data",l.a.get(n).then((function(e){l.a.get("/admin/adminDashbord").then((function(n){console.log(n.data),t({type:c.g,payload:e.data,dashboard:n.data})})).catch((function(e){return console.log(e)}))})))}},p=function(e,t){return function(n){l.a.post("/registerStudent",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t.push("/login")})).catch((function(e){return console.log(e)}))}},d=function(e){return function(t){t({type:c.b}),t({type:c.d});l.a.post("/student/updateStudent",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t(i("STUDENT")),t({type:c.j,payload:"success"})})).catch((function(e){console.log(e),t({type:c.i,payload:e.response.data})}))}},m=function(e,t){return function(n){l.a.post("/registerFaculty",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t.push("/login")})).catch((function(e){return console.log(e)}))}},f=function(e,t){return function(n){n({type:c.b});var a,u,s=new FormData;e.sign?(u="sign",s.append(u,e[u],e[u].name),a=t+"/changeSign"):(u="photo",s.append(u,e[u],e[u].name),a=t+"/changePhoto");l.a.post(a,s,{header:{"content-type":"multipart/form-data"}}).then(function(){var e=Object(o.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(i("/student"===t?"STUDENT":"ADMIN"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),n({type:c.i,payload:e.response.data})}))}},h=function(e,t){return function(n){n({type:c.b}),n({type:c.d});l.a.post("".concat(t,"/changePassword"),e,{header:{"content-type":"multipart/form-data"}}).then((function(e){n({type:c.j,payload:"success"})})).catch((function(e){console.error(e),n({type:c.i,payload:e.response.data})}))}},g=function(e,t,n){return function(a){a({type:c.b}),a({type:c.d});var r="feerefund"===e?"/student/feeRefund":"/student/DocumentSubmit/".concat(e);l.a.post(r,t,{header:{"content-type":"multipart/form-data"}}).then((function(e){a({type:c.j,payload:"Success"}),a(i("STUDENT")),a({type:c.b}),n.push("/student")})).catch((function(e){console.error(e),a({type:c.i,payload:e.response.data})}))}},y=function(e){return function(t){t({type:c.b}),t({type:c.d}),console.log(e);l.a.post("/forgotPassword",e,{header:{"content-type":"multipart/form-data"}}).then((function(e){t({type:c.j,payload:e.data})})).catch((function(e){console.error(e),t({type:c.i,payload:e.response.data})}))}},b=function(){return function(e){e({type:c.f})}},E=function(e,t){var n="Bearer ".concat(e);l.a.defaults.headers.common.Authorization=n,l.a.defaults.headers.common.Domain=t}},290:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(0),o=n.n(r),c=n(4),u=(n(290),n(28)),l=n(18),s=n(184),i=n(220),p=n(221),d=n(183);var m=Object(p.a)({form:"loginForm",initialValues:{type:"STUDENT"},validate:function(e){var t={};return e.type||(t.type="Please Select Role"),e.username||(t.username="Please Enter Username"),e.password||(t.password="Please Enter Password"),t}})((function(e){var t=e.loginUser,n=e.history,l=e.UI,s=l.loading,p=l.errors,m=Object(r.useState)("Enrollment No:"),f=Object(a.a)(m,2),h=f[0],g=f[1],y=Object(r.useState)("Enter Your Enrollment No..."),b=Object(a.a)(y,2),E=b[0],v=b[1];return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 col-lg-4 mx-auto mx-auto"},o.a.createElement("form",{id:"loginForm",className:"regForm",onSubmit:e.handleSubmit((function(e){t(e,n)}))},o.a.createElement("h2",{className:"form-title text-center"},"Login"),(p.error||p.string)&&o.a.createElement("div",{class:"comment alert alert-danger",style:{textAlign:"center"},id:"error_message"},o.a.createElement("strong",null,"Invalid Credentials")),o.a.createElement("div",{className:"form-group"},o.a.createElement(i.a,{name:"type",label:"Role:",placeholder:"Select Role",component:d.c,options:{Student:"STUDENT",Admin:"ADMIN"},onChange:function(e){"ADMIN"===e.target.value?(v("Enter Your Id..."),g("Department Id:")):(v("Enter Your Enrollment No..."),g("Enrollment No:")),console.log(e)}})),o.a.createElement("div",{className:"form-group"},o.a.createElement(i.a,{type:"text",name:"username",label:h,placeholder:E,component:d.d,require:"true"})),o.a.createElement("div",{className:"form-group"},o.a.createElement(i.a,{type:"password",name:"password",label:"Password:",placeholder:"Enter Password.",component:d.d,require:"true"})),o.a.createElement("div",{className:"form-group"},o.a.createElement(c.b,{to:"forgotPassword"},"Forgot Password?")),o.a.createElement("div",{className:"form-group text-center"},s?o.a.createElement(u.a,null):o.a.createElement("button",{type:"submit",className:"btn btn-success"},"Login"))))))}));t.default=Object(l.b)((function(e){return{UI:e.UI}}),{loginUser:s.f})(m)}}]);
//# sourceMappingURL=8.92af7b1c.chunk.js.map