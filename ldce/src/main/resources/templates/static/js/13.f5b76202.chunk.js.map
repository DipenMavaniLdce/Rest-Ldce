{"version":3,"sources":["Components/ReduxForm/form.js","redux/actions/userAction.js","Components/ForgotPassword/ForgotPassword.js"],"names":["textInput","formField","input","meta","params","className","getClassName","renderLabel","label","name","id","renderError","touched","error","hasError","selectInput","options","value","disabled","hidden","placeholder","renderOption","getBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","ImageInput","state","lableImg","onFileChange","e","a","props","target","files","test","type","setState","size","val","onChange","this","src","default","alt","accept","style","left","message","React","Component","htmlFor","require","required","color","dangerouslySetInnerHTML","__html","Object","keys","map","key","scrollToFirstError","el","document","querySelector","focus","position","getBoundingClientRect","top","documentElement","scrollTop","window","scrollTo","behavior","loginUser","userData","history","dispatch","CLEAR_ERRORS","LOADING_UI","axios","post","then","res","SET_AUTHENTICATED","setAuthorizationHeader","data","jwt","domain","getUserData","STOP_LOADING_UI","push","catch","err","console","log","SET_ERRORS","payload","response","url","get","SET_USER","dashboard","SET_ADMIN","RegisterStudent","formData","header","updateStudent","SET_OPERATION_SUCCESS","RegisterAdmin","changePhotoOrSign","values","FormData","append","changePassword","requestCertificate","link","forgotPasswordAction","logout","LOGOUT","token","FBIdToken","defaults","headers","common","ForgotPasswordForm","reduxForm","form","initialValues","validate","errors","username","UI","loading","success","successMessage","useState","setLabel","setPlaceholder","maskEmail","setMaskEmail","useEffect","email","str","finalArr","len","split","indexOf","forEach","item","pos","join","onSubmit","field","index","handleSubmit","component","Student","Admin","class","textAlign","connect"],"mappings":"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","file":"static/js/13.f5b76202.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport const textInput = (formField) => {\r\n  const { input, meta, ...params } = formField;\r\n  const className = getClassName(meta, params.className);\r\n  return (\r\n    <>\r\n      {renderLabel(params.label, input.name, params)}\r\n      <input className={className} {...input} id={input.name} {...params} />\r\n      {renderError(meta)}\r\n    </>\r\n  );\r\n};\r\n\r\nconst getClassName = ({ touched, error }, className = \"form-control\") => {\r\n  const hasError = touched && error;\r\n  if (hasError) {\r\n    className += \" error\";\r\n  }\r\n  return className;\r\n};\r\n\r\nexport const selectInput = (formField) => {\r\n  const { input, meta, options, ...params } = formField;\r\n  const className = getClassName(meta, params.className);\r\n  return (\r\n    <>\r\n      {renderLabel(params.label, input.name, params)}\r\n      <select className={className} {...input} id={input.name} {...params}>\r\n        <option value=\"\" disabled hidden>\r\n          {params.placeholder}\r\n        </option>\r\n        {renderOption(options)}\r\n      </select>\r\n      {renderError(meta)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport const getBase64 = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = (error) => reject(error);\r\n  });\r\n};\r\n\r\nexport class ImageInput extends React.Component {\r\n  state = { error: \"\", lableImg: null };\r\n\r\n  onFileChange = async (e) => {\r\n    const { input } = this.props;\r\n    const file = e.target.files[0];\r\n    var error = \"\";\r\n    if (file) {\r\n      if (!/^image/.test(file.type)) {\r\n        error = `Only jpg,jpeg,png file type allow.`;\r\n        this.setState({ error });\r\n        return false;\r\n      } else if (file.size > 512000) {\r\n        error = `File size must not exceed 500 KB.`;\r\n        this.setState({ error });\r\n        return false;\r\n      }\r\n      this.setState({ error });\r\n      const val = await getBase64(file);\r\n      //for lable value of input image i'have change state\r\n      this.setState({\r\n        ...this.state,\r\n        lableImg: val,\r\n      });\r\n      //this is onother change for setting form data 'cause backend Excepting multipar-form data\r\n      input.onChange(file);\r\n    } else {\r\n      input.onChange(null);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { input, meta, ...params } = this.props;\r\n    const { error } = this.state;\r\n\r\n    return (\r\n      <>\r\n        <label>\r\n          <img\r\n            src={this.state.lableImg || params.default}\r\n            className={params.className || `upload-${input.name}`}\r\n            alt=\"Student Img\"\r\n          />\r\n          <span className=\"btn btn-primary btn-lg btn-block mx-auto\">\r\n            {params.placeholder}\r\n          </span>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            className=\"form-control invisible position-absolute\"\r\n            style={{ left: \"0\" }}\r\n            id={input.name}\r\n            onChange={this.onFileChange}\r\n          />\r\n          {renderError(meta)}\r\n          {error && <label className=\"error\">{error}</label>}\r\n        </label>\r\n        <p>{params.message}</p>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst renderLabel = (label, htmlFor, { require, required }) => {\r\n  return (\r\n    label && (\r\n      <label htmlFor={htmlFor}>\r\n        {label} {(required || require) && <font color=\"red\">*</font>}\r\n      </label>\r\n    )\r\n  );\r\n};\r\n\r\nconst renderError = ({ touched, error }) => {\r\n  return (\r\n    touched &&\r\n    error && (\r\n      <label\r\n        className=\"error\"\r\n        dangerouslySetInnerHTML={{ __html: error }}\r\n      ></label>\r\n    )\r\n  );\r\n};\r\n\r\nconst renderOption = (options) => {\r\n  return Object.keys(options).map((key) => (\r\n    <option key={options[key]} value={options[key]}>\r\n      {key}\r\n    </option>\r\n  ));\r\n};\r\n\r\nexport const scrollToFirstError = () => {\r\n  const el = document.querySelector(\"input.error\");\r\n  if (el) {\r\n    el.focus();\r\n    const position =\r\n      el.getBoundingClientRect().top + document.documentElement.scrollTop;\r\n    const offset = 50;\r\n    window.scrollTo({ top: position - offset, behavior: \"smooth\" });\r\n  }\r\n};\r\n","import {\r\n\tSET_ERRORS,\r\n\tCLEAR_ERRORS,\r\n\tSET_AUTHENTICATED,\r\n\tSET_USER,\r\n\tLOADING_UI,\r\n\tSET_ADMIN,\r\n\tSTOP_LOADING_UI,\r\n\tSET_OPERATION_SUCCESS,\r\n\tLOGOUT,\r\n\r\n} from '../type';\r\nimport axios from 'axios';\r\n\r\nexport const loginUser = (userData, history) => async (dispatch) => {\r\n\tdispatch({ type: CLEAR_ERRORS });\r\n\tdispatch({ type: LOADING_UI });\r\n\taxios\r\n\t\t.post('/authenticate', userData)\r\n\t\t.then((res) => {\r\n\t\t\tdispatch({ type: SET_AUTHENTICATED });\r\n\t\t\tsetAuthorizationHeader(res.data.jwt, res.data.domain);\r\n\t\t\tdispatch(getUserData(res.data.domain, history));\r\n\t\t\tdispatch({ type: STOP_LOADING_UI });\r\n\t\t\tif (res.data.domain === 'STUDENT') {\r\n\t\t\t\thistory.push('/student');\r\n\t\t\t} else {\r\n\t\t\t\thistory.push('/admin');\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SET_ERRORS,\r\n\t\t\t\tpayload: err.response.data\r\n\t\t\t});\r\n\t\t});\r\n};\r\n\r\nexport const getUserData = (domain) => (dispatch) => {\r\n\tlet url;\r\n\tif (domain === 'STUDENT') {\r\n\t\turl = '/student/data';\r\n\t\taxios\r\n\t\t\t.get(url)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_USER,\r\n\t\t\t\t\tpayload: res.data\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: SET_ERRORS,\r\n\t\t\t\t\tpayload: err\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t} else {\r\n\t\turl = '/admin/data';\r\n\t\taxios.get(url).then((res) => {\r\n\t\t\taxios\r\n\t\t\t\t.get('/admin/adminDashbord')\r\n\t\t\t\t.then((dashboard) => {\r\n\t\t\t\t\tconsole.log(dashboard.data);\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: SET_ADMIN,\r\n\t\t\t\t\t\tpayload: res.data,\r\n\t\t\t\t\t\tdashboard: dashboard.data\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => console.log(err));\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const RegisterStudent = (formData, history) => (dispatch) => {\r\n\tconst config = {\r\n\t\theader: { 'content-type': 'multipart/form-data' }\r\n\t};\r\n\taxios\r\n\t\t.post('/registerStudent', formData, config)\r\n\t\t.then((res) => {\r\n\t\t\thistory.push('/login');\r\n\t\t})\r\n\t\t.catch((err) => console.log(err));\r\n};\r\n\r\nexport const updateStudent = (formData) => (dispatch) => {\r\n\tdispatch({ type: CLEAR_ERRORS });\r\n\tdispatch({ type: LOADING_UI });\r\n\tconst config = {\r\n\t\theader: { 'content-type': 'multipart/form-data' }\r\n\t};\r\n\taxios\r\n\t\t.post('/student/updateStudent', formData, config)\r\n\t\t.then((res) => {\r\n\t\t\tdispatch(getUserData('STUDENT'));\r\n\t\t\tdispatch({ type: SET_OPERATION_SUCCESS, payload: 'success' });\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SET_ERRORS,\r\n\t\t\t\tpayload: err.response.data\r\n\t\t\t});\r\n\t\t});\r\n};\r\n\r\nexport const RegisterAdmin = (formData, history) => (dispatch) => {\r\n\tconst config = {\r\n\t\theader: { 'content-type': 'multipart/form-data' }\r\n\t};\r\n\taxios\r\n\t\t.post('/registerFaculty', formData, config)\r\n\t\t.then((res) => {\r\n\t\t\thistory.push('/login');\r\n\t\t})\r\n\t\t.catch((err) => console.log(err));\r\n};\r\n\r\nexport const changePhotoOrSign = (values, domain) => (dispatch) => {\r\n\tdispatch({ type: CLEAR_ERRORS });\r\n\tconst formData = new FormData();\r\n\tlet url;\r\n\tlet key;\r\n\tif (values['sign']) {\r\n\t\tkey = 'sign';\r\n\t\tformData.append(key, values[key], values[key].name);\r\n\t\turl = domain + '/changeSign';\r\n\t} else {\r\n\t\tkey = 'photo';\r\n\t\tformData.append(key, values[key], values[key].name);\r\n\t\turl = domain + '/changePhoto';\r\n\t}\r\n\r\n\tconst config = {\r\n\t\theader: { 'content-type': 'multipart/form-data' }\r\n\t};\r\n\taxios\r\n\t\t.post(url, formData, config)\r\n\t\t.then(async (res) => {\r\n\t\t\tif (domain === \"/student\") {\r\n\t\t\t\tdispatch(getUserData(\"STUDENT\"))\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(getUserData(\"ADMIN\"))\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.log(err);\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: SET_ERRORS,\r\n\t\t\t\tpayload: err.response.data\r\n\t\t\t});\r\n\t\t});\r\n};\r\n\r\nexport const changePassword = (formData, domain) => (dispatch) => {\r\n\tdispatch({ type: CLEAR_ERRORS });\r\n\tdispatch({ type: LOADING_UI });\r\n\tconst config = {\r\n\t\theader: { 'content-type': 'multipart/form-data' }\r\n\t};\r\n\taxios\r\n\t\t.post(`${domain}/changePassword`, formData, config)\r\n\t\t.then((res) => {\r\n\t\t\tdispatch({ type: SET_OPERATION_SUCCESS, payload: 'success' });\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tdispatch({ type: SET_ERRORS, payload: err.response.data });\r\n\t\t});\r\n};\r\n\r\n\r\n\r\nexport const requestCertificate = (type, formData, history) => (dispatch) => {\r\n\tdispatch({ type: CLEAR_ERRORS });\r\n\tdispatch({ type: LOADING_UI });\r\n\r\n\tconst config = {\r\n\t\theader: { 'content-type': 'multipart/form-data' }\r\n\t};\r\n\tconst link = type === \"feerefund\" ? '/student/feeRefund' : `/student/DocumentSubmit/${type}`;\r\n\taxios\r\n\t\t.post(link, formData, config)\r\n\t\t.then((res) => {\r\n\t\t\tdispatch({ type: SET_OPERATION_SUCCESS, payload: 'Success' });\r\n\t\t\tdispatch(getUserData(\"STUDENT\"))\r\n\t\t\tdispatch({ type: CLEAR_ERRORS })\r\n\t\t\thistory.push('/student')\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tdispatch({ type: SET_ERRORS, payload: err.response.data });\r\n\t\t});\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexport const forgotPasswordAction = (formData) => (dispatch) => {\r\n\tdispatch({ type: CLEAR_ERRORS });\r\n\tdispatch({ type: LOADING_UI });\r\n\tconsole.log(formData);\r\n\tconst config = {\r\n\t\theader: { 'content-type': 'multipart/form-data' }\r\n\t};\r\n\taxios\r\n\t\t.post(`/forgotPassword`, formData, config)\r\n\t\t.then((res) => {\r\n\t\t\tdispatch({ type: SET_OPERATION_SUCCESS, payload: res.data });\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\tconsole.error(err);\r\n\t\t\tdispatch({ type: SET_ERRORS, payload: err.response.data });\r\n\t\t});\r\n};\r\n\r\nexport const logout = () => (dispatch) => {\r\n\tdispatch({\r\n\t\ttype: LOGOUT\r\n\t})\r\n}\r\n\r\nconst setAuthorizationHeader = (token, domain) => {\r\n\tconst FBIdToken = `Bearer ${token}`;\r\n\taxios.defaults.headers.common['Authorization'] = FBIdToken;\r\n\taxios.defaults.headers.common['Domain'] = domain;\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Loading from \"../../Util/Loading\";\r\nimport { connect } from \"react-redux\";\r\nimport { forgotPasswordAction } from \"../../redux/actions/userAction\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { selectInput, textInput } from \"../ReduxForm/form\";\r\n\r\nfunction ForgotPassword(props) {\r\n  const { loading, errors, success, successMessage } = props.UI;\r\n  const [label, setLabel] = useState(\"Enrollment No:\");\r\n  const [placeholder, setPlaceholder] = useState(\"Enter Your Enrollment No...\");\r\n  const { forgotPasswordAction } = props;\r\n  const [maskEmail, setMaskEmail] = useState(null);\r\n  useEffect(() => {\r\n    if (successMessage.email) {\r\n      let str = successMessage.email;\r\n      let finalArr = [];\r\n      str = str.split(\"\");\r\n      let len = str.indexOf(\"@\");\r\n      str.forEach((item, pos) => {\r\n        pos >= 2 && pos <= len - 3\r\n          ? finalArr.push(\"*\")\r\n          : finalArr.push(str[pos]);\r\n      });\r\n      setMaskEmail(finalArr.join(\"\"));\r\n    }\r\n  }, [successMessage]);\r\n  const onRoleChange = (e) => {\r\n    const type = e.target.value;\r\n    if (type === \"ADMIN\") {\r\n      setPlaceholder(\"Enter Your Id...\");\r\n      setLabel(\"Department Id:\");\r\n    } else {\r\n      setPlaceholder(\"Enter Your Enrollment No...\");\r\n      setLabel(\"Enrollment No:\");\r\n    }\r\n    console.log(e);\r\n  };\r\n\r\n  const onSubmit = async (values) => {\r\n    const formData = new FormData();\r\n    Object.keys(values).forEach((field, index) => {\r\n      formData.append(field, values[field]);\r\n    });\r\n    await forgotPasswordAction(formData);\r\n\r\n    // history.pushState('/login')\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-6 col-lg-4 mx-auto mx-auto\">\r\n          <form\r\n            id=\"forgotPassword\"\r\n            className=\"regForm\"\r\n            onSubmit={props.handleSubmit(onSubmit)}\r\n          >\r\n            <h2 className=\"form-title text-center\">ForgotPassword</h2>\r\n            <div className=\"form-group\">\r\n              <Field\r\n                name=\"type\"\r\n                label=\"Role:\"\r\n                placeholder=\"Select Role\"\r\n                component={selectInput}\r\n                options={{\r\n                  Student: \"STUDENT\",\r\n                  Admin: \"ADMIN\",\r\n                }}\r\n                onChange={onRoleChange}\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <Field\r\n                type=\"text\"\r\n                name=\"username\"\r\n                label={label}\r\n                placeholder={placeholder}\r\n                component={textInput}\r\n                require\r\n              />\r\n            </div>\r\n            <div className=\"form-group text-center\">\r\n              <button type=\"submit\" className=\"btn btn-success\">\r\n                Submit\r\n              </button>\r\n            </div>\r\n            {loading === true ? (\r\n              <Loading />\r\n            ) : (\r\n                errors.error && (\r\n                  <div class=\"alert alert-danger\" style={{ textAlign: \"center\" }}>\r\n                    Username Not Found\r\n                  </div>\r\n                )\r\n              )}\r\n            {success && (\r\n              <div class=\"alert alert-success\" style={{ textAlign: \"center\" }}>\r\n                <p>username and password sent to this email</p>\r\n                {successMessage.email && maskEmail}\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst validate = (values) => {\r\n  const errors = {};\r\n  if (!values.type) {\r\n    errors.type = \"Please Select Role\";\r\n  }\r\n  if (!values.username) {\r\n    errors.username = \"Please Enter Username\";\r\n  }\r\n  return errors;\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  UI: state.UI,\r\n});\r\n\r\nconst ForgotPasswordForm = reduxForm({\r\n  form: \"forgotPassword\",\r\n  initialValues: { type: \"STUDENT\" },\r\n  validate,\r\n})(ForgotPassword);\r\n\r\nexport default connect(mapStateToProps, { forgotPasswordAction })(\r\n  ForgotPasswordForm\r\n);\r\n"],"sourceRoot":""}